(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1955:function(e,t,r){Promise.resolve().then(r.bind(r,5334)),Promise.resolve().then(r.bind(r,3623))},5334:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(7437),a=r(9343),o=r(9772),i=r(1014),s=r(2265),l=r(1446),c=r(8582);let u=o.z.object({name:o.z.string().nonempty("Nome \xe9 Obrigat\xf3rio").min(3,"M\xednimo de 3 Letras para o Nome"),subdomain:o.z.string().nonempty("Sudominio \xe9 Obrigat\xf3rio").min(3,"M\xednimo de 3 Letras para o subdominio"),user:o.z.string().optional(),image:c.uO.file(o.z.instanceof(FileList)).transform(e=>(console.log({fileList:e,file:e[0]}),e[0])).refine(e=>e&&e.size<=3e8,{message:"Tamanho M\xe1ximo da Imagem 300MB"}).refine(e=>e&&e&&["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type),{message:"Formato n\xe3o Suportado"})});function d(){let{register:e,handleSubmit:t,formState:{errors:r},setValue:o,getValues:c}=(0,a.cI)({resolver:(0,i.F)(u)}),[d,f]=(0,s.useState)(!1);async function p(e){let t=new FormData;for(let r in e)t.append(r,e[r]);e.image&&t.set("image",e.image),(await fetch("/api/create-tenant",{method:"POST",body:t})).ok?console.log("Menu criado com sucesso"):console.error("Erro ao criar menu")}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.V,{open:d,setOpen:f,trigger:(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:"w-full group flex items-center rounded-lg p-2 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",children:[(0,n.jsxs)("svg",{className:"flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,n.jsx)("path",{d:"M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.96 2.96 0 0 0 .13 5H5Z"}),(0,n.jsx)("path",{d:"M6.737 11.061a2.961 2.961 0 0 1 .81-1.515l6.117-6.116A4.839 4.839 0 0 1 16 2.141V2a1.97 1.97 0 0 0-1.933-2H7v5a2 2 0 0 1-2 2H0v11a1.969 1.969 0 0 0 1.933 2h12.134A1.97 1.97 0 0 0 16 18v-3.093l-1.546 1.546c-.413.413-.94.695-1.513.81l-3.4.679a2.947 2.947 0 0 1-1.85-.227 2.96 2.96 0 0 1-1.635-3.257l.681-3.397Z"}),(0,n.jsx)("path",{d:"M8.961 16a.93.93 0 0 0 .189-.019l3.4-.679a.961.961 0 0 0 .49-.263l6.118-6.117a2.884 2.884 0 0 0-4.079-4.078l-6.117 6.117a.96.96 0 0 0-.263.491l-.679 3.4A.961.961 0 0 0 8.961 16Zm7.477-9.8a.958.958 0 0 1 .68-.281.961.961 0 0 1 .682 1.644l-.315.315-1.36-1.36.313-.318Zm-5.911 5.911 4.236-4.236 1.359 1.359-4.236 4.237-1.7.339.341-1.699Z"})]}),(0,n.jsx)("span",{className:"ms-3 whitespace-nowrap",children:"Adicionar Menu"})]})}),children:(0,n.jsxs)("div",{className:"p-8 bg-gray-700 rounded-lg shadow-lg h-full",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Criar Menu "}),(0,n.jsxs)("form",{onSubmit:t(p),className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:" text-gray-300",children:"Nome do Estabelecimento:"}),(0,n.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...e("name"),required:!0}),(0,n.jsx)("label",{className:" text-gray-300",children:"Subdominio:"}),(0,n.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...e("subdomain"),required:!0}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 mt-8",children:[(0,n.jsx)("label",{className:" text-gray-300",children:"Imagem:"}),(0,n.jsx)("input",{type:"file",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...e("image")}),r.image&&(0,n.jsx)("span",{className:"mt-2 text-red-500",children:r.image.message})]})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-gray-500 text-white p-2 rounded",children:"Salvar"})]})]})})})}},1446:function(e,t,r){"use strict";r.d(t,{V:function(){return o}});var n=r(7437),a=r(4887);function o(e){let{children:t,trigger:r,open:o,setOpen:i}=e;return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)("div",{onClick:()=>i(!0),children:r}),o&&(0,a.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg min-w-md max-w-lg relative",children:[(0,n.jsx)("button",{className:"absolute top-2 right-2 text-gray-600 hover:text-gray-800",onClick:()=>i(!1),children:"\xd7"}),t]})}),document.body)]})}},3623:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437),a=r(2265),o=r(1169);function i(){let[e,t]=(0,a.useState)([]),r=(0,o.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/menu-box/"),r=await e.json();r.existingTenants&&t(r.existingTenants)}catch(e){console.error("Error fetching tenants:",e),t([])}})()},[]);let i=e=>{r.push("/dashboard/".concat(e.subdomain))};return(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 ml-64",children:0===e.length?(0,n.jsx)("div",{children:"No menus available"}):e.map(e=>(0,n.jsxs)("div",{onClick:()=>i(e),className:"bg-gray-300 p-4 rounded-lg shadow-md text-center cursor-pointer",children:[(0,n.jsx)("div",{className:"h-16 w-16 mx-auto bg-white rounded-full mb-4",children:e.image&&(0,n.jsx)("img",{className:"h-16 w-16 rounded-full object-fill",src:e.image,alt:"image"})}),(0,n.jsx)("div",{className:"font-medium",children:e.nome}),(0,n.jsx)("div",{className:"text-gray-600",children:e.subdomain}),(0,n.jsxs)("div",{className:"flex w-full justify-end",children:[(0,n.jsx)("button",{onClick:()=>s(e.subdomain),children:(0,n.jsx)("svg",{className:"w-12 h-12 text-gray-800 dark:text-red-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{"fill-rule":"evenodd",d:"M8.586 2.586A2 2 0 0 1 10 2h4a2 2 0 0 1 2 2v2h3a1 1 0 1 1 0 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8a1 1 0 0 1 0-2h3V4a2 2 0 0 1 .586-1.414ZM10 6h4V4h-4v2Zm1 4a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Zm4 0a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Z","clip-rule":"evenodd"})})}),(0,n.jsx)("button",{onClick:()=>l(e.subdomain),children:(0,n.jsx)("svg",{className:"w-12 h-12 text-gray-800 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"})})})]})]},e.subdomain))});async function s(e){try{(await fetch("/api/delete-tenant",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok?console.log("Tenant deleted successfully"):console.error("Failed to delete tenant")}catch(e){console.error("Error deleting tenant:",e)}}async function l(e){}}},8582:function(e,t,r){"use strict";let n,a,o,i,s;r.d(t,{uO:function(){return g}});var l=r(9772),c=Object.create,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,m=(n={"../../node_modules/lodash.get/index.js"(e,t){var r,n="__lodash_hash_undefined__",a=1/0,o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/,s=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,d="object"==typeof global&&global&&global.Object===Object&&global,f="object"==typeof self&&self&&self.Object===Object&&self,p=d||f||Function("return this")(),h=Array.prototype,m=Function.prototype,g=Object.prototype,y=p["__core-js_shared__"],b=(r=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",v=m.toString,x=g.hasOwnProperty,j=g.toString,_=RegExp("^"+v.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=p.Symbol,N=h.splice,z=$(p,"Map"),O=$(Object,"create"),k=w?w.prototype:void 0,S=k?k.toString:void 0;function M(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function C(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function E(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e,t){for(var r,n=e.length;n--;)if((r=e[n][0])===t||r!=r&&t!=t)return n;return -1}function P(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function $(e,t){var r,n=null==e?void 0:e[t];return V(n)&&(!b||!(b in n))&&("[object Function]"==(r=V(n)?j.call(n):"")||"[object GeneratorFunction]"==r||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(n)?_:u).test(function(e){if(null!=e){try{return v.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(n))?n:void 0}M.prototype.clear=function(){this.__data__=O?O(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(O){var r=t[e];return r===n?void 0:r}return x.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:x.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?n:t,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(e){var t=this.__data__,r=F(t,e);return!(r<0)&&(r==t.length-1?t.pop():N.call(t,r,1),!0)},C.prototype.get=function(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]},C.prototype.has=function(e){return F(this.__data__,e)>-1},C.prototype.set=function(e,t){var r=this.__data__,n=F(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},E.prototype.clear=function(){this.__data__={hash:new M,map:new(z||C),string:new M}},E.prototype.delete=function(e){return P(this,e).delete(e)},E.prototype.get=function(e){return P(this,e).get(e)},E.prototype.has=function(e){return P(this,e).has(e)},E.prototype.set=function(e,t){return P(this,e).set(e,t),this};var A=T(function(e){e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(D(e))return S?S.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var t,r=[];return s.test(e)&&r.push(""),e.replace(l,function(e,t,n,a){r.push(n?a.replace(c,"$1"):t||e)}),r});function T(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i),i};return r.cache=new(T.Cache||E),r}T.Cache=E;var Z=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return"symbol"==typeof e||!!e&&"object"==typeof e&&"[object Symbol]"==j.call(e)}t.exports=function(e,t,r){var n=null==e?void 0:function(e,t){t=!function(e,t){if(Z(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||D(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}(t,e)?Z(r=t)?r:A(r):[t];for(var r,n=0,s=t.length;null!=e&&n<s;)e=e[function(e){if("string"==typeof e||D(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t[n++])];return n&&n==s?e:void 0}(e,t);return void 0===n?r:n}}},function(){return a||(0,n[f(n)[0]])((a={exports:{}}).exports,a),a.exports}),g={};((e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})})(g,{checkbox:()=>_,file:()=>w,formData:()=>E,json:()=>S,numeric:()=>j,preprocessFormData:()=>C,repeatable:()=>N,repeatableOfType:()=>z,text:()=>x});var y=e=>{if(0===e.length)return[];let t=e.match(/^\[(.+?)\](.*)$/)||e.match(/^\.?([^\.\[\]]+)(.*)$/);if(t){let[e,r,n]=t;return[/^\d+$/.test(r)?Number(r):r,...y(n)]}return[e]};s=null!=(o=m())?c(p(o)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of f(t))h.call(e,a)||a===r||u(e,a,{get:()=>t[a],enumerable:!(n=d(t,a))||n.enumerable})})(!i&&o&&o.__esModule?s:u(s,"default",{value:o,enumerable:!0}),o);var b=l.z.literal("").transform(()=>void 0),v=e=>t=>{let r=e.safeParse(t);return r.success?r.data:t},x=(e=l.z.string())=>l.z.preprocess(v(b),e),j=(e=l.z.number())=>l.z.preprocess(v(l.z.union([b,l.z.string().transform(e=>Number(e)).refine(e=>!Number.isNaN(e))])),e),_=({trueValue:e="on"}={})=>l.z.union([l.z.literal(e).transform(()=>!0),l.z.literal(void 0).transform(()=>!1)]),w=(e=l.z.instanceof(File))=>l.z.preprocess(e=>e instanceof File&&0===e.size?void 0:e,e),N=(e=l.z.array(x()))=>l.z.preprocess(e=>Array.isArray(e)?e:void 0===e?[]:[e],e),z=e=>N(l.z.array(e)),O=l.z.array(l.z.tuple([l.z.string(),l.z.any()])),k=e=>{try{return JSON.parse(e)}catch{return e}},S=e=>l.z.preprocess(v(l.z.union([b,l.z.string().transform(e=>k(e))])),e),M=v(l.z.any().refine(e=>Symbol.iterator in e).transform(e=>[...e]).refine(e=>O.safeParse(e).success).transform(e=>{let t=new Map;for(let[r,n]of e)t.has(r)?t.get(r).push(n):t.set(r,[n]);return[...t.entries()].reduce((e,[t,r])=>{var n;return n=1===r.length?r[0]:r,function(e,t,r){var n;let a=t.slice(0,-1),o=t[t.length-1],i=e;for(let e=0;e<a.length;e++){let t=a[e];if(void 0===i[t]){let r=null!=(n=a[e+1])?n:o;i[t]="number"==typeof r?[]:{}}i=i[t]}return i[o]=r,e}(e,y(t),n)},{})})),C=M,E=e=>l.z.preprocess(M,e instanceof l.DI?e:l.z.object(e))}},function(e){e.O(0,[374,971,23,744],function(){return e(e.s=1955)}),_N_E=e.O()}]);