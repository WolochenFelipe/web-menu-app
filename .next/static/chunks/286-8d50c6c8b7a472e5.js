"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{1431:function(e,t,r){r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),o=r(1446),c=r(9343),n=r(9772),i=r(1014);let l=n.z.object({Name:n.z.string(),Description:n.z.string()});function d(e){let{tenantId:t,categoryId:r}=e,[o,n]=(0,s.useState)(null),[d,x]=(0,s.useState)(!1),{register:p,handleSubmit:m,watch:g}=(0,c.cI)({resolver:(0,i.F)(l)}),h=g(["Name","Description"]);async function y(e){(await fetch("/api/category/update-category",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.Name,description:e.Description,menu:t,id:r})})).ok?(console.log("Categoria alterada com sucesso"),x(!1)):console.error("Erro ao criar Categoria")}return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/category/get-category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu:t,id:r})}),a=await e.json();a&&n(a)}catch(e){console.error("Error fetching category:",e)}})()},[t,r]),(0,s.useEffect)(()=>{o&&x(h[0]!==o.name||h[1]!==o.description)},[h,o]),(0,a.jsxs)("div",{className:"p-8 bg-gray-700 rounded-lg shadow-lg h-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Categoria"}),o?(0,a.jsxs)("form",{onSubmit:m(y),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-300",children:"Nome:"}),(0,a.jsx)("input",{defaultValue:o.name,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("Name")}),(0,a.jsx)("label",{className:"text-gray-300",children:"Descri\xe7\xe3o:"}),(0,a.jsx)("input",{defaultValue:o.description,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("Description")})]}),d&&(0,a.jsx)("button",{type:"submit",className:"w-full bg-gray-500 text-white p-2 rounded",children:"Salvar"}),(0,a.jsx)(u,{categoryId:r})]}):(0,a.jsx)("p",{children:"Carregando categoria..."})]})}function u(e){let{categoryId:t}=e,[r,c]=(0,s.useState)(!1);async function n(){(await fetch("/api/category/delete-category",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})).ok?(c(!1),console.log("Categoria criado com sucesso")):console.log("Erro ao criar Categoria")}return(0,a.jsx)(o.V,{open:r,setOpen:c,trigger:(0,a.jsx)("button",{type:"button",className:"font-semibold w-2/3 text-center bg-red-400 text-white p-2 rounded hover:bg-red-500",children:"Deletar Categoria"}),children:(0,a.jsxs)("div",{className:"p-8 bg-gray-700 rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Adicionar Categoria"}),(0,a.jsx)("form",{onSubmit:n,className:"space-y-4",id:"deleteCategoryForm",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-red-400 text-2xl",children:"Deseja Excluir o Categoria Permanentemente?"}),(0,a.jsx)("button",{type:"submit",form:"deleteCategoryForm",className:"font-semibold w-full bg-red-400 text-white p-2 rounded",children:"Confirmar"})]})})]})})}function x(e){let{tenant:t}=e,[r,c]=(0,s.useState)([]),[n,i]=(0,s.useState)(null),[l,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!t){console.error("Tenant is undefined or empty");return}(async()=>{try{let e=await fetch("/api/category/category-box/".concat(t)),r=await e.json();r.categories?c(r.categories):console.error("No categories found or error occurred:",r.error)}catch(e){console.error("Error fetching categories:",e),c([])}})()},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"relative overflow-x-auto ml-64",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"\xcdcone"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Nome da Categoria"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Descri\xe7\xe3o"})]})}),(0,a.jsx)("tbody",{children:0===r.length?(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"N\xe3o h\xe1 categorias ainda"})}):(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(o.V,{open:l,setOpen:u,children:(0,a.jsx)(d,{tenantId:t,categoryId:n.id})}),r.map(e=>(0,a.jsxs)("tr",{onClick:()=>{i(e),u(!0)},className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,a.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.icon&&(0,a.jsx)("img",{className:"h-8 w-8 rounded-full",src:e.icon,alt:"image"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.description})]},e.id))]})})]})})})}},1446:function(e,t,r){r.d(t,{V:function(){return o}});var a=r(7437),s=r(4887);function o(e){let{children:t,trigger:r,open:o,setOpen:c}=e;return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{onClick:()=>c(!0),children:r}),o&&(0,s.createPortal)((0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg min-w-md max-w-lg relative",children:[(0,a.jsx)("button",{className:"absolute top-2 right-2 text-gray-600 hover:text-gray-800",onClick:()=>c(!1),children:"\xd7"}),t]})}),document.body)]})}},170:function(e,t,r){r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),o=r(1446),c=r(9343),n=r(9772),i=r(1014);let l=n.z.object({Name:n.z.string(),Description:n.z.string(),Notices:n.z.string(),NutricionalTable:n.z.string()});function d(e){let{tenantId:t,productId:r}=e,[o,n]=(0,s.useState)(null),[d,x]=(0,s.useState)(!1),{register:p,handleSubmit:m,watch:g}=(0,c.cI)({resolver:(0,i.F)(l)}),h=g(["Name","Description","Notices","NutricionalTable"]);async function y(e){(await fetch("/api/product/update-product",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.Name,description:e.Description,notices:e.Notices,nutricionalTable:e.NutricionalTable,menu:t,id:r})})).ok?(console.log("Categoria alterada com sucesso"),x(!1)):console.error("Erro ao criar Categoria")}return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/product/get-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu:t,id:r})}),a=await e.json();a&&n(a)}catch(e){console.error("Error fetching category:",e)}})()},[t,r]),(0,s.useEffect)(()=>{o&&x(h[0]!==o.name||h[1]!==o.description||h[2]!==o.notices||h[3]!==o.nutricionalTable)},[h,o]),(0,a.jsxs)("div",{className:"p-8 bg-gray-700 rounded-lg shadow-lg h-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Produto"}),o?(0,a.jsxs)("form",{onSubmit:m(y),className:"space-y-4",id:"updateProductForm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-300",children:"Nome:"}),(0,a.jsx)("input",{defaultValue:o.name,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("Name")}),(0,a.jsx)("label",{className:"text-gray-300",children:"Descri\xe7\xe3o:"}),(0,a.jsx)("input",{defaultValue:o.description,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("Description")}),(0,a.jsx)("label",{className:"text-gray-300",children:"Alertas:"}),(0,a.jsx)("input",{defaultValue:o.notices,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("Notices")}),(0,a.jsx)("label",{className:"text-gray-300",children:"Tabela Nutricional:"}),(0,a.jsx)("input",{defaultValue:o.nutricionalTable,type:"text",className:"w-full p-2 border border-gray-300 rounded text-gray-700",...p("NutricionalTable")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2",children:[d&&(0,a.jsx)("button",{type:"submit",form:"updateProductForm",className:"font-semibold w-2/3 text-center bg-gray-500 text-white p-2 rounded hover:bg-gray-400",children:"Salvar"}),(0,a.jsx)(u,{productId:r})]})]}):(0,a.jsx)("p",{children:"Carregando produto..."})]})}function u(e){let{productId:t}=e,[r,c]=(0,s.useState)(!1);async function n(){(await fetch("/api/product/delete-product",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})).ok?(c(!1),console.log("Produto criado com sucesso")):console.log("Erro ao criar produto")}return(0,a.jsx)(o.V,{open:r,setOpen:c,trigger:(0,a.jsx)("button",{type:"button",className:"font-semibold w-2/3 text-center bg-red-400 text-white p-2 rounded hover:bg-red-500",children:"Deletar Produto"}),children:(0,a.jsxs)("div",{className:"p-8 bg-gray-700 rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Adicionar Produto"}),(0,a.jsx)("form",{onSubmit:n,className:"space-y-4",id:"deleteProductForm",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-red-400 text-2xl",children:"Deseja Excluir o Produto Permanentemente?"}),(0,a.jsx)("button",{type:"submit",form:"deleteProductForm",className:"font-semibold w-full bg-red-400 text-white p-2 rounded",children:"Confirmar"})]})})]})})}function x(e){let{tenant:t}=e,[r,c]=(0,s.useState)([]),[n,i]=(0,s.useState)(null),[l,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!t){console.error("Tenant is undefined or empty");return}(async()=>{try{let e=await fetch("/api/product/product-box/".concat(t)),r=await e.json();r.categories?c(r.categories):console.error("No categories found or error occurred:",r.error)}catch(e){console.error("Error fetching categories:",e),c([])}})()},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"relative overflow-x-auto ml-64",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Imagem"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Nome do Produto"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Descri\xe7\xe3o"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Pre\xe7o"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Categoria"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Alertas"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Tabela Nutricional"})]})}),(0,a.jsx)("tbody",{children:0===r.length?(0,a.jsx)("tr",{children:(0,a.jsx)("th",{children:"N\xe3o h\xe1 produtos ainda"})}):(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(o.V,{open:l,setOpen:u,children:(0,a.jsx)(d,{tenantId:t,productId:n.id})}),r.map(e=>(0,a.jsxs)("tr",{onClick:()=>{i(e),u(!0)},className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,a.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.image&&(0,a.jsx)("img",{className:"h-8 w-8 rounded-full",src:e.image,alt:"image"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.description}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.price}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.category}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.notices}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.nutricionalTable})]},e.id))]})})]})})})}}}]);